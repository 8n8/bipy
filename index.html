<!DOCTYPE html>
<html lang="en-US">
<head>
<style>
.notClicked {
  flex: 1;
  height: 140px;
  background: black;
  color: white;
  text-align: center;
  border: 1px solid white;
  line-height: 140px;
}
.clickedButton {
  flex: 1;
  height: 140px;
  background: white;
  text-align: center;
  line-height: 140px;
  border: 1px solid white;
}
#labelsdiv {
  display: flex;
  flex-wrap: nowrap;
  width: 600px;
}
img {
  width: 600px;
}
</style>
</head>
<body>
<script>
let choices = [];
function postChoices() {
  fetch('/', {method: 'POST', body: JSON.stringify(choices)});
}
const keys = ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p'];
document.onkeypress = function(e) {
  e = e || window.event;
  const keycode = e.keyCode;
  console.log(keycode);
  if (keycode === 13) {
    fetch('/', {method: 'POST', body: JSON.stringify(choices)});
    return;
  }
  if (!(keycode in buttonIds)) {
    return 
  }
  const buttonId = buttonIds[keycode];
  const button = document.getElementById(buttonId);
  choices.push(buttonId);
  button.classList.remove('notClicked');
  button.classList.add('clickedButton');
}
const buttonIds = {
  113: 0,  // q
  119: 1,  // w
  101: 2,  // e
  114: 3,  // r
  116: 4,  // t
  121: 5,  // y
  117: 6,  // u
  105: 7,  // i
  111: 8,  // o
  112: 9}; // p
</script>
<img src='/image'>
<div id='labelsdiv'></div>
</body>
<script>
const boxDiv = document.getElementById('labelsdiv');
for (let i=0; i < 10; i++) {
  const id = '' + i;
  const box = document.createElement('div');
  box.innerHTML = keys[i];
  box.className = 'notClicked';
  box.id = id;
  boxDiv.appendChild(box);
}
</script>
</html>
